<wxs src="../more/more.wxs" module="tools" />

<!-- 学生角色 -->
<view wx:if="{{userstatus==3}}" class='sign'>
  <image  style='display:{{Issignstu == 0? "block" : "none"}}' src='/image/space.png' class='space'> </image>
  <view class='explain' style='display:{{Issignstu == 0? "block" : "none"}}'>暂无课堂签到信息发布</view>
  <text style='display:{{Issign == 1? "block" : "none"}}' >
    你是第<text class='info'>{{signnum}}</text>个签到
    你的签到时间是
    <text class='info'>{{signtime}}</text>
  </text>
  <text style='display:{{Issign == 0? "block" : "none"}}' >
    正在发布签到，请点击下面按钮进行签到
  </text>
  <button style='display:{{Issignstu == 1? "block" : "none"}}' class='signclick' bindtap='signstu'>{{signbtn}}</button>
</view>


<!-- 老师角色 -->
<view wx:if="{{userstatus==2}}" class='sign1'>
  <text class='title'>选择课堂: 
  </text> 

  <!-- 下拉框选中 -->
  <view class="phone_one" bindtap="clickPerson">
    <view class="phone_personal">{{firstPerson}}</view>
  </view>
 
  <!-- <view class='time' style=' font-weight: normal;'>
    签到时间默认五分钟
  </view>  -->
 
  <view class="person_box">
    <view class="phone_select" hidden="{{selectPerson}}">
      <!-- <view wx:for = "{{sign}}" wx:key="" class="select_one" data-scheduleid='{{item.scheduleid}}' bindtap="mySelect" data-id="{{time > item.date+item.startpoint && time < item.date+item.endpoint? '1':'0'}}"  data-me="{{time > item.date+item.startpoint ? '':'item.date item.startpoint--item.endpoint 第item.classnum节'}}" data-signid="{{item.sign_id}}" style='color:{{time<item.date+item.startpoint ? "gray":""}}'>{{item.date}} {{item.startpoint}}--{{item.endpoint}}<!--  第{{item.classnum}}节 </view> -->
<!-- 已经上完的课——查看签到信息 -->
      <view  wx:for = "{{sign}}" wx:key="" wx:if = "{{time > (item.date+' '+item.endpoint) || (time > (item.date+' '+item.startpoint) && time <= (item.date+' '+item.endpoint) && item.sign_id != null) }}" class="select_one" data-scheduleid='{{item.scheduleid}}' bindtap="mySelect" data-id="1"  data-me="{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节" data-signid="{{item.sign_id}}" >{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节</view>

<!-- 正在上的课——发布签到 -->
      <view  wx:for = "{{sign}}" wx:key="" wx:if = "{{time > (item.date+' '+item.startpoint) && time <= (item.date+' '+item.endpoint) && item.sign_id == null}}" class="select_one" data-scheduleid='{{item.scheduleid}}' bindtap="mySelect" data-id="0"  data-me="{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节" data-signid="{{item.sign_id}}" >{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节</view>

<!-- 还未到时间的课——不可操作 -->
      <view  wx:for = "{{sign}}" wx:key="" wx:if = "{{time < (item.date+' '+item.startpoint)}}" class="select_one" data-scheduleid='{{item.scheduleid}}' data-me="{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节" data-signid="{{item.sign_id}}" style='color:gray'>{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节</view>

      <!-- <view class="select_one" bindtap="mySelect" data-id="1" data-me="2018/11/06 9:30--11:00 第二节">2018/11/06 9:30--11:00 第二节</view>
      <view class="select_one" data-me="2018/11/13 9:30--11:00 第三节" style='color:gray'>2018/11/13 9:30--11:00 第三节</view> -->
      
    </view>
  </view>
</view>

<!-- 正在上的课显示 -->
 <button class='submit' bindtap='submit' style='display:{{Issigntea == 2? "block":"none"}}' >发布签到</button>

<!-- 已上完且发布了签到的显示 -->
   <!-- <view class='title1'>你已发布签到，签到信息如下： 
  </view>  -->
<view style='display:{{Issigntea == 1? "block":"none"}};' class='contact'>
  <view class="contact-tab" >
    <view class="{{current == 1 ? 'current' : ''}}" bindtap="changeTab" data-index="1">已签到</view>
    <view class="{{current == 0 ? 'current' : ''}}" bindtap="changeTab" data-index="0">未签到</view>
  </view>
</view>

<!-- 已上完但未发布签到的显示 -->
<view class='classcard' style='display:{{Issigntea == 0? "block":"none"}}'>
  <image src='{{space}}' class='space'></image>
  <view>  
    <text style='font-size:30rpx;'>您本节课未发布签到</text>
  </view>
</view>

<!-- 已经签到学生信息 -->
<view style='display:{{Issigntea == 1? "block":"none"}};'>
  <view class='students'  wx:for = "{{signstu}}" wx:key = "">
    <image wx:if="{{item.protrait!=null}}" class="headphoto" src="{{item.protrait}}" background-size="cover"></image>
    <image wx:else class="headphoto" src="{{imgUrl}}" background-size="cover"></image>
    <view class='stu_name'>
      {{item.name}}
    </view>
    <view class='stu_tel'>
      {{item.sign_time}}
    </view>
    <view class='clear'></view>
  </view>
</view>

<!-- 未签到学生信息
<view style='display:{{Issigntea == 1? "block":"none"}};'>
<view class='students'  wx:for = "{{notsignstu}}" wx:key = "">
  <image wx:if="{{item.protrait!=null}}" class="headphoto" src="{{item.protrait}}" background-size="cover"></image>
  <image wx:else class="headphoto" src="{{imgUrl}}" background-size="cover"></image>
  <view class='stu_name'>
    {{item.name}}
  </view>
  <view class='stu_tel'>
    {{item.signtime}}
  </view>
  <view class='clear'></view>
</view>
</view> -->
