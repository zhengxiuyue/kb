<wxs src="../more/more.wxs" module="tools" />

<!-- 学生角色 -->
<view wx:if="{{userstatus==3}}" class='sign'>
  <image  style='display:{{Issignstu == 0? "block" : "none"}}' src='/image/space.png' class='space'> </image>
  <view class='explain' style='display:{{Issignstu == 0? "block" : "none"}}'>暂无课堂签到信息发布</view>
  <button style='display:{{Issignstu == 1? "block" : "none"}}' bindtap='signstu'>签到</button>
</view>


<!-- 老师角色 -->
<view wx:if="{{userstatus==2}}" class='sign1'>
  <text class='title'>选择课堂: 
  </text> 
  <view class="phone_one" bindtap="clickPerson">
    <view class="phone_personal">{{firstPerson}}</view>
  </view>
 
  <!-- <view class='time' style=' font-weight: normal;'>
    签到时间默认五分钟
  </view>  -->
 
  <view class="person_box">
    <view class="phone_select" hidden="{{selectPerson}}">
      <!-- <view wx:for = "{{sign}}" wx:key="" class="select_one" data-scheduleid='{{item.scheduleid}}' bindtap="mySelect" data-id="{{time > item.date+item.startpoint && time < item.date+item.endpoint? '1':'0'}}"  data-me="{{time > item.date+item.startpoint ? '':'item.date item.startpoint--item.endpoint 第item.classnum节'}}" data-signid="{{item.sign_id}}" style='color:{{time<item.date+item.startpoint ? "gray":""}}'>{{item.date}} {{item.startpoint}}--{{item.endpoint}}<!--  第{{item.classnum}}节 </view> -->

<!-- 已经上完的课——查看签到信息 -->
       <view  wx:for = "{{sign}}" wx:key="" wx:if = "{{time > item.date+item.startpoint}}" class="select_one" data-scheduleid='{{item.scheduleid}}' bindtap="mySelect" data-id="1"  data-me="{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节" data-signid="{{item.sign_id}}" >{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节</view>

<!-- 正在上的课——发布签到 -->
      <view  wx:for = "{{sign}}" wx:key="" wx:if = "{{time >= item.date+item.startpoint && time <= item.date+item.endpoint}}" class="select_one" data-scheduleid='{{item.scheduleid}}' bindtap="mySelect" data-id="0"  data-me="{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节" data-signid="{{item.sign_id}}" >>{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节</view>

<!-- 还未到时间的课——不可操作 -->
      <view  wx:for = "{{sign}}" wx:key="" wx:if = "{{time < item.date+item.startpoint}}" class="select_one" data-scheduleid='{{item.scheduleid}}' data-me="{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节" data-signid="{{item.sign_id}}" style='color:gray'>{{item.date}} {{tools.my_slice(item.startpoint,0,5)}}-{{tools.my_slice(item.endpoint,0,5)}} 第{{item.classnum}}节</view>

      <!-- <view class="select_one" bindtap="mySelect" data-id="1" data-me="2018/11/06 9:30--11:00 第二节">2018/11/06 9:30--11:00 第二节</view>
      <view class="select_one" data-me="2018/11/13 9:30--11:00 第三节" style='color:gray'>2018/11/13 9:30--11:00 第三节</view> -->
      
    </view>
  </view>
 <button class='submit' bindtap='submit' style='display:{{Issigntea == 0? "block" : "none"}}' >发布签到</button>

  <view style='display:{{Issigntea == 1? "block" : "none"}}'>
   <!-- <view class='title1'>你已发布签到，签到信息如下： 
  </view>  -->

  <view class="contact-tab" style='display:{{Issigntea == 1? "block" : "none"}}'>
		<view class="{{current == 0 ? 'current' : ''}}" bindtap="changeTab" data-index="0">已签到</view>
		<view class="{{current == 1 ? 'current' : ''}}" bindtap="changeTab" data-index="1">未签到</view>
	</view>

  	<signin style="{{current == 0 ? 'display: inline;': 'display: none;'}}" data="{{userstatus}}"  search="{{value}}"></signin>
	<notsignin style="{{current == 1 ? 'display: inline;': 'display: none;'}}" data="{{userstatus}}"></notsignin>
  </view>

</view>

